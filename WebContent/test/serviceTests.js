/*jslint browser: true*/
/*globals it, describe, beforeEach, inject, afterEach, expect*/

describe('services', function () {
    var services;
    var $httpBackend;

    //Load the commonFilters module
    beforeEach(function () {
        module('slalom.common.modals');
        module('slalom.common.errors');
        module('app.services', function ($provide) {
            var modalMock = {};
            $provide.value('ModalService', modalMock);
        });

        inject(function (SharedServices) {
            services = SharedServices;
        });
    });


    beforeEach(inject(function ($injector) {
        $httpBackend = $injector.get('$httpBackend');
        // Add mock data as necessary based on path requests:
        $httpBackend.when('GET', "rs/StaffingService/getAccessInfo").respond({"lastName": "TESTER2715", "commonName": "", "firstName": "", "location": "9100", "access": { "viewDrugResults": true, "printApplication": true, "editReq": true, "editBackgroundCheck": true, "closeReq": true, "candidateSearch": true, "createQualifiedPool": true, "addRemoveCandidate": true, "viewReq": true, "viewBackgroundCheckStatus": true, "viewBackgroundCheckResults": true, "viewCandidateList": true}});
        $httpBackend.when('GET', "testData/AccessInfo.json").respond({"lastName": "TESTER2715", "commonName": "", "firstName": "", "location": "9100", "access": { "viewDrugResults": true, "printApplication": true, "editReq": true, "editBackgroundCheck": true, "closeReq": true, "candidateSearch": true, "createQualifiedPool": true, "addRemoveCandidate": true, "viewReq": true, "viewBackgroundCheckStatus": true, "viewBackgroundCheckResults": true, "viewCandidateList": true}});
        $httpBackend.when('GET', 'rs/StaffingService/getDepartmentDetails?storeNumber=0121').respond({"valid":true,"deptDetails":[{"deptCode":"004","shortDesc":"004 - PACKDOWN TEAM","jobTtlDtls":[{"jobTtlCode":"DPTSUP","shortDesc":"DEPT SUPERVISOR"},{"jobTtlCode":"FRTTM","shortDesc":"FREIGHT TEAM ASSOCIATE"},{"jobTtlCode":"KCDSUP","shortDesc":"KEY CARRIER DEPT SUPERVISOR"}]},{"deptCode":"010","shortDesc":"010 - GREETERS","jobTtlDtls":[{"jobTtlCode":"DOOR","shortDesc":"DOOR MONITOR ASSOCIATE"}]},{"deptCode":"021","shortDesc":"021 - LUMBER","jobTtlDtls":[{"jobTtlCode":"BLSALE","shortDesc":"BILINGUAL SALES ASSOCIATE"},{"jobTtlCode":"DPTSUP","shortDesc":"DEPT SUPERVISOR"},{"jobTtlCode":"HLGSPC","shortDesc":"LEAD GENERATOR SPECIALIST"},{"jobTtlCode":"KCDSUP","shortDesc":"KEY CARRIER DEPT SUPERVISOR"},{"jobTtlCode":"SALES","shortDesc":"SALES ASSOCIATE"},{"jobTtlCode":"SPLST","shortDesc":"SALES SPECIALIST"}]},{"deptCode":"022","shortDesc":"022 - BLDG. MATERIALS","jobTtlDtls":[{"jobTtlCode":"BLSALE","shortDesc":"BILINGUAL SALES ASSOCIATE"},{"jobTtlCode":"DPTSUP","shortDesc":"DEPT SUPERVISOR"},{"jobTtlCode":"HLGSPC","shortDesc":"LEAD GENERATOR SPECIALIST"},{"jobTtlCode":"KCDSUP","shortDesc":"KEY CARRIER DEPT SUPERVISOR"},{"jobTtlCode":"SALES","shortDesc":"SALES ASSOCIATE"},{"jobTtlCode":"SPLST","shortDesc":"SALES SPECIALIST"}]},{"deptCode":"023","shortDesc":"023 - WALL\u0026FLOOR COVER.","jobTtlDtls":[{"jobTtlCode":"DPTSUP","shortDesc":"DEPT SUPERVISOR"},{"jobTtlCode":"HLGSPC","shortDesc":"LEAD GENERATOR SPECIALIST"},{"jobTtlCode":"KCDSUP","shortDesc":"KEY CARRIER DEPT SUPERVISOR"},{"jobTtlCode":"SALES","shortDesc":"SALES ASSOCIATE"},{"jobTtlCode":"SPLST","shortDesc":"SALES SPECIALIST"}]},{"deptCode":"024","shortDesc":"024 - PAINT","jobTtlDtls":[{"jobTtlCode":"BLSALE","shortDesc":"BILINGUAL SALES ASSOCIATE"},{"jobTtlCode":"DPTSUP","shortDesc":"DEPT SUPERVISOR"},{"jobTtlCode":"HLGSPC","shortDesc":"LEAD GENERATOR SPECIALIST"},{"jobTtlCode":"HPPSPT","shortDesc":"PRO PAINT SALES SPECIALIST"},{"jobTtlCode":"KCDSUP","shortDesc":"KEY CARRIER DEPT SUPERVISOR"},{"jobTtlCode":"SALES","shortDesc":"SALES ASSOCIATE"},{"jobTtlCode":"SPLST","shortDesc":"SALES SPECIALIST"}]},{"deptCode":"025","shortDesc":"025 - HARDWARE","jobTtlDtls":[{"jobTtlCode":"BLSALE","shortDesc":"BILINGUAL SALES ASSOCIATE"},{"jobTtlCode":"DPTSUP","shortDesc":"DEPT SUPERVISOR"},{"jobTtlCode":"HLGSPC","shortDesc":"LEAD GENERATOR SPECIALIST"},{"jobTtlCode":"KCDSUP","shortDesc":"KEY CARRIER DEPT SUPERVISOR"},{"jobTtlCode":"SALES","shortDesc":"SALES ASSOCIATE"},{"jobTtlCode":"SPLST","shortDesc":"SALES SPECIALIST"}]},{"deptCode":"026","shortDesc":"026 - PLUMBING","jobTtlDtls":[{"jobTtlCode":"BLSALE","shortDesc":"BILINGUAL SALES ASSOCIATE"},{"jobTtlCode":"DPTSUP","shortDesc":"DEPT SUPERVISOR"},{"jobTtlCode":"HLGSPC","shortDesc":"LEAD GENERATOR SPECIALIST"},{"jobTtlCode":"KCDSUP","shortDesc":"KEY CARRIER DEPT SUPERVISOR"},{"jobTtlCode":"MTRDSP","shortDesc":"MASTER TRADE SPECIALIST"},{"jobTtlCode":"SALES","shortDesc":"SALES ASSOCIATE"},{"jobTtlCode":"SPLST","shortDesc":"SALES SPECIALIST"}]},{"deptCode":"027","shortDesc":"027 - ELECTRICAL/LIGHTING","jobTtlDtls":[{"jobTtlCode":"DPTSUP","shortDesc":"DEPT SUPERVISOR"},{"jobTtlCode":"HLGSPC","shortDesc":"LEAD GENERATOR SPECIALIST"},{"jobTtlCode":"KCDSUP","shortDesc":"KEY CARRIER DEPT SUPERVISOR"},{"jobTtlCode":"MTRDSP","shortDesc":"MASTER TRADE SPECIALIST"},{"jobTtlCode":"SALES","shortDesc":"SALES ASSOCIATE"},{"jobTtlCode":"SPLST","shortDesc":"SALES SPECIALIST"}]},{"deptCode":"028","shortDesc":"028 - GARDEN/SEASONAL","jobTtlDtls":[{"jobTtlCode":"BLSALE","shortDesc":"BILINGUAL SALES ASSOCIATE"},{"jobTtlCode":"DPTSUP","shortDesc":"DEPT SUPERVISOR"},{"jobTtlCode":"FRTTM","shortDesc":"FREIGHT TEAM ASSOCIATE"},{"jobTtlCode":"HLGSPC","shortDesc":"LEAD GENERATOR SPECIALIST"},{"jobTtlCode":"KCDSUP","shortDesc":"KEY CARRIER DEPT SUPERVISOR"},{"jobTtlCode":"LOT","shortDesc":"LOT ASSOCIATE"},{"jobTtlCode":"SALES","shortDesc":"SALES ASSOCIATE"},{"jobTtlCode":"SPLST","shortDesc":"SALES SPECIALIST"}]},{"deptCode":"029","shortDesc":"029 - KITCHEN \u0026 BATH","jobTtlDtls":[{"jobTtlCode":"DESIGN","shortDesc":"DESIGNER"}]},{"deptCode":"030","shortDesc":"030 - MILLWORK","jobTtlDtls":[{"jobTtlCode":"DPTSUP","shortDesc":"DEPT SUPERVISOR"},{"jobTtlCode":"HLGSPC","shortDesc":"LEAD GENERATOR SPECIALIST"},{"jobTtlCode":"KCDSUP","shortDesc":"KEY CARRIER DEPT SUPERVISOR"},{"jobTtlCode":"SALES","shortDesc":"SALES ASSOCIATE"},{"jobTtlCode":"SPLST","shortDesc":"SALES SPECIALIST"}]},{"deptCode":"031","shortDesc":"031 - SPECIAL SERVICES","jobTtlDtls":[{"jobTtlCode":"DPTSUP","shortDesc":"DEPT SUPERVISOR"},{"jobTtlCode":"EXPDTR","shortDesc":"CUSTOMER ORDER SPECIALIST"},{"jobTtlCode":"HCSGRT","shortDesc":"CUSTOMER SERVICE GREETER"},{"jobTtlCode":"HLGSPC","shortDesc":"LEAD GENERATOR SPECIALIST"},{"jobTtlCode":"INSSUP","shortDesc":"INSTALL SALES SUPERVISOR"},{"jobTtlCode":"INSTSL","shortDesc":"INSTALL SALES"},{"jobTtlCode":"KCDSUP","shortDesc":"KEY CARRIER DEPT SUPERVISOR"},{"jobTtlCode":"SPLORD","shortDesc":"SPECIAL SERVICES ASSOCIATE"},{"jobTtlCode":"SPLST","shortDesc":"SALES SPECIALIST"},{"jobTtlCode":"SPLSUP","shortDesc":"SPECIAL SERVICES SUPERVISOR"}]},{"deptCode":"033","shortDesc":"033 - INSTALL SALES","jobTtlDtls":[{"jobTtlCode":"DPTSUP","shortDesc":"DEPT SUPERVISOR"},{"jobTtlCode":"SALES","shortDesc":"SALES ASSOCIATE"}]},{"deptCode":"035","shortDesc":"035 - LOSS PREVENTION","jobTtlDtls":[{"jobTtlCode":"DOOR","shortDesc":"DOOR MONITOR ASSOCIATE"},{"jobTtlCode":"LPASO","shortDesc":"ASSET PROTECTION SPECIALIST"}]},{"deptCode":"036","shortDesc":"036 - DECORATOR CENTER","jobTtlDtls":[{"jobTtlCode":"DSGCON","shortDesc":"STORE DESIGN CONSULTANT"},{"jobTtlCode":"SALES","shortDesc":"SALES ASSOCIATE"}]},{"deptCode":"037","shortDesc":"037 - COMM\u0027L SALES/EXPORT","jobTtlDtls":[{"jobTtlCode":"EXPORT","shortDesc":"EXPORT ASSOCIATE"},{"jobTtlCode":"SALES","shortDesc":"SALES ASSOCIATE"}]},{"deptCode":"038","shortDesc":"038 - PACKOUT TEAM","jobTtlDtls":[{"jobTtlCode":"FFTMAS","shortDesc":"FFT FREIGHT TEAM ASSOCIATE"},{"jobTtlCode":"FFTSSA","shortDesc":"FFT S\u0026S ASSOCIATE"},{"jobTtlCode":"FFTSUP","shortDesc":"FFT SUPERVISOR"},{"jobTtlCode":"FRTMLD","shortDesc":"FFT TEAM LEAD"},{"jobTtlCode":"FRTSUP","shortDesc":"FREIGHT TEAM SUPERVISOR"},{"jobTtlCode":"FRTTM","shortDesc":"FREIGHT TEAM ASSOCIATE"},{"jobTtlCode":"FTMRCS","shortDesc":"FFT RECEIVING SUPPORT"},{"jobTtlCode":"INVSPT","shortDesc":"BAY INTEGRITY ASSOCIATE"},{"jobTtlCode":"KCDSUP","shortDesc":"KEY CARRIER DEPT SUPERVISOR"},{"jobTtlCode":"RECVNG","shortDesc":"RECEIVING ASSOCIATE"}]},{"deptCode":"041","shortDesc":"041 - PROJECT SERVICES","jobTtlDtls":[{"jobTtlCode":"DOOR","shortDesc":"DOOR MONITOR ASSOCIATE"},{"jobTtlCode":"HLGSPC","shortDesc":"LEAD GENERATOR SPECIALIST"}]},{"deptCode":"042","shortDesc":"042 - PRO SALES","jobTtlDtls":[{"jobTtlCode":"BLPSAL","shortDesc":"BILINGUAL PRO ACCT SALES ASSOC"},{"jobTtlCode":"DPTSUP","shortDesc":"DEPT SUPERVISOR"},{"jobTtlCode":"EXPDTR","shortDesc":"CUSTOMER ORDER SPECIALIST"},{"jobTtlCode":"HLGSPC","shortDesc":"LEAD GENERATOR SPECIALIST"},{"jobTtlCode":"HPPSPT","shortDesc":"PRO PAINT SALES SPECIALIST"},{"jobTtlCode":"HPROAC","shortDesc":"PRO ASSOCIATE"},{"jobTtlCode":"KCDSUP","shortDesc":"KEY CARRIER DEPT SUPERVISOR"},{"jobTtlCode":"PASALS","shortDesc":"PRO ACCT SALES ASSOCIATE"},{"jobTtlCode":"PDTSUP","shortDesc":"PRO DEPT SUPERVISOR"},{"jobTtlCode":"SPLORD","shortDesc":"SPECIAL SERVICES ASSOCIATE"}]},{"deptCode":"059","shortDesc":"059 - BLINDS/WALLPAPER","jobTtlDtls":[{"jobTtlCode":"DPTSUP","shortDesc":"DEPT SUPERVISOR"},{"jobTtlCode":"DSGCON","shortDesc":"STORE DESIGN CONSULTANT"},{"jobTtlCode":"HLGSPC","shortDesc":"LEAD GENERATOR SPECIALIST"},{"jobTtlCode":"KCDSUP","shortDesc":"KEY CARRIER DEPT SUPERVISOR"},{"jobTtlCode":"SALES","shortDesc":"SALES ASSOCIATE"},{"jobTtlCode":"SPLST","shortDesc":"SALES SPECIALIST"}]},{"deptCode":"070","shortDesc":"070 - APPLIANCES","jobTtlDtls":[{"jobTtlCode":"DPTSUP","shortDesc":"DEPT SUPERVISOR"},{"jobTtlCode":"HLGSPC","shortDesc":"LEAD GENERATOR SPECIALIST"},{"jobTtlCode":"KCDSUP","shortDesc":"KEY CARRIER DEPT SUPERVISOR"},{"jobTtlCode":"SPDSUP","shortDesc":"SPECIALTY DEPT SUPERVISOR"}]},{"deptCode":"078","shortDesc":"078 - TOOL RENTAL","jobTtlDtls":[{"jobTtlCode":"DPTSUP","shortDesc":"DEPT SUPERVISOR"},{"jobTtlCode":"HLGSPC","shortDesc":"LEAD GENERATOR SPECIALIST"},{"jobTtlCode":"KCDSUP","shortDesc":"KEY CARRIER DEPT SUPERVISOR"},{"jobTtlCode":"SALES","shortDesc":"SALES ASSOCIATE"},{"jobTtlCode":"TECH","shortDesc":"TOOL RENTAL SERVICE TECHNICIAN"}]},{"deptCode":"085","shortDesc":"085 - KITCHEN AND BATH AISLE","jobTtlDtls":[{"jobTtlCode":"DPTSUP","shortDesc":"DEPT SUPERVISOR"},{"jobTtlCode":"KCDSUP","shortDesc":"KEY CARRIER DEPT SUPERVISOR"},{"jobTtlCode":"SALES","shortDesc":"SALES ASSOCIATE"},{"jobTtlCode":"SPLST","shortDesc":"SALES SPECIALIST"}]},{"deptCode":"089","shortDesc":"089 - CROSS MERCHANDISING","jobTtlDtls":[{"jobTtlCode":"CMERCH","shortDesc":"CROSS MERCHANDISING ASSOCIATE"},{"jobTtlCode":"HLGSPC","shortDesc":"LEAD GENERATOR SPECIALIST"}]},{"deptCode":"090","shortDesc":"090 - CASHIERS/REFUNDS","jobTtlDtls":[{"jobTtlCode":"BLCASH","shortDesc":"BILINGUAL CASHIER"},{"jobTtlCode":"BLPCSH","shortDesc":"BILINGUAL PRO CASHIER"},{"jobTtlCode":"CASHR","shortDesc":"CASHIER"},{"jobTtlCode":"CSHSUP","shortDesc":"FRONT END SUPERVISOR"},{"jobTtlCode":"HCASHR","shortDesc":"HEAD CASHIER"},{"jobTtlCode":"KCDSUP","shortDesc":"KEY CARRIER DEPT SUPERVISOR"},{"jobTtlCode":"PRCSHR","shortDesc":"PRO CASHIER"}]},{"deptCode":"091","shortDesc":"091 - OFFICE","jobTtlDtls":[{"jobTtlCode":"COMPRM","shortDesc":"COMPUTER ROOM ASSOCIATE"},{"jobTtlCode":"COMSUP","shortDesc":"COMPUTER ROOM SUPERVISOR"},{"jobTtlCode":"CSHCOL","shortDesc":"CASHIER COLLEGE INSTRUCTOR"},{"jobTtlCode":"HMDSUP","shortDesc":"MERCH EXECUTION AREA SUPV"},{"jobTtlCode":"HOFASC","shortDesc":"OFFICE ASSOCIATE"},{"jobTtlCode":"HRTRNP","shortDesc":"RETAIL TRAINING PROGRAM ASSOC"},{"jobTtlCode":"KCDSUP","shortDesc":"KEY CARRIER DEPT SUPERVISOR"},{"jobTtlCode":"MEANT1","shortDesc":"MERCH EXECT ASSOC NTR"},{"jobTtlCode":"MNTSUP","shortDesc":"MERCH EXEC SUPV NON TRAVEL"},{"jobTtlCode":"MRCHEA","shortDesc":"MERCHANDISING EXECUTION ASSOC"},{"jobTtlCode":"OPSSUP","shortDesc":"OPS DEPT SUPERVISOR"},{"jobTtlCode":"SCHWTR","shortDesc":"SCHEDULE WRITER"},{"jobTtlCode":"VAULT","shortDesc":"VAULT ASSOCIATE"},{"jobTtlCode":"VLTSUP","shortDesc":"VAULT SUPERVISOR"}]},{"deptCode":"092","shortDesc":"092 - INVENTORY MANAGEMENT","jobTtlDtls":[{"jobTtlCode":"INVSPT","shortDesc":"BAY INTEGRITY ASSOCIATE"},{"jobTtlCode":"MOBORD","shortDesc":"INVENTORY TEAM ASSOCIATE"}]},{"deptCode":"093","shortDesc":"093 - RECEIVING","jobTtlDtls":[{"jobTtlCode":"KCDSUP","shortDesc":"KEY CARRIER DEPT SUPERVISOR"},{"jobTtlCode":"RECSUP","shortDesc":"RECEIVING SUPERVISOR"},{"jobTtlCode":"RECVNG","shortDesc":"RECEIVING ASSOCIATE"},{"jobTtlCode":"RTV","shortDesc":"RTV ASSOCIATE"}]},{"deptCode":"094","shortDesc":"094 - DELIVERIES","jobTtlDtls":[{"jobTtlCode":"DELWIL","shortDesc":"DELIVERY/WILL CALL COORD"},{"jobTtlCode":"DRIVER","shortDesc":"DELIVERY DRIVER"},{"jobTtlCode":"HORDRA","shortDesc":"ORDER ASSOCIATE"},{"jobTtlCode":"HORDRC","shortDesc":"ORDER COORDINATOR"},{"jobTtlCode":"HPRFLA","shortDesc":"PRO FULFILLMENT ASSOCIATE"},{"jobTtlCode":"PULLER","shortDesc":"DELIVERY PULLER"}]},{"deptCode":"095","shortDesc":"095 - HRM","jobTtlDtls":[{"jobTtlCode":"ASDSUP","shortDesc":"ASSOCIATE SUPPORT DEPT SUPV"},{"jobTtlCode":"HASCOR","shortDesc":"ASSOCIATE COORDINATOR"},{"jobTtlCode":"HRTRNP","shortDesc":"RETAIL TRAINING PROGRAM ASSOC"},{"jobTtlCode":"KCASUP","shortDesc":"KEY CARRIER ASDS"},{"jobTtlCode":"KCDSUP","shortDesc":"KEY CARRIER DEPT SUPERVISOR"},{"jobTtlCode":"SCHWTR","shortDesc":"SCHEDULE WRITER"}]},{"deptCode":"096","shortDesc":"096 - LOT","jobTtlDtls":[{"jobTtlCode":"BLLOT","shortDesc":"BILINGUAL LOT ASSOCIATE"},{"jobTtlCode":"FCLTY","shortDesc":"FACILITY SUPPORT ASSOCIATE"},{"jobTtlCode":"HFLSAC","shortDesc":"FACILITY SUPPORT ASSOC - SALES"},{"jobTtlCode":"JANTR","shortDesc":"JANITOR"},{"jobTtlCode":"LOT","shortDesc":"LOT ASSOCIATE"},{"jobTtlCode":"PLOT","shortDesc":"PRO LOT LOADER"}]},{"deptCode":"097","shortDesc":"097 - PHONE SALES","jobTtlDtls":[{"jobTtlCode":"DPTSUP","shortDesc":"DEPT SUPERVISOR"},{"jobTtlCode":"PHONE","shortDesc":"PHONE CENTER ASSOCIATE"}]},{"deptCode":"099","shortDesc":"099 - OLYMPIC ATHLETE","jobTtlDtls":[{"jobTtlCode":"SOLYM","shortDesc":"OLYMPIC ATHLETE"}]}]});
    }));

    afterEach(function () {
        $httpBackend.verifyNoOutstandingExpectation();
        $httpBackend.verifyNoOutstandingRequest();
    });

    //checkmark filter tests
    describe('services', function () {
        it('should fetch access info for current user', function () {
            var fetched;
            services.getAccessInfo()
                .then(function (user) {
                    fetched = user;
                });
            $httpBackend.flush();
            expect(fetched.location).toBe('9100');
        });

        it('should fetch departments for store', function () {
            var fetched;
            services.getDepartments('0121')
                .then(function (data) {
                    fetched = data;
                });
            $httpBackend.flush();
            expect(fetched.valid).toBe(true);
        });
    });
});